p## Python Shell Functions

# Process for the imdb_rating_num that is part of Movies model in models.
# Switch to True to run

from webapp.models import Movie
total_count = 0
success_running_count = 0
for movie in Movie.objects.all():
    if movie.imdb_rating and '/' in movie.imdb_rating:
        try:
            rating_value = movie.imdb_rating.split('/')[0]
            movie.imdb_rating_num = float(rating_value)
            movie.save()
            success_running_count += 1
        except ValueError:
            print(f"Failed to convert rating for: {movie.title}")
        total_count += 1
    success_rate = success_running_count / total_count
    print(f"Success rate of converting imdb_ratings to imdb_rating_num: {success_running_count}/{total_count} = {success_rate}")