p## Python Shell Functions

# Process for the imdb_rating_num that is part of Movies model in models.
# Switch to True to run

import time
from webapp.models import Movie

# Start of your if block
if True:
    start_time = time.time()  # Corrected to use time.time()

    total_count = 0
    success_running_count = 0
    for movie in Movie.objects.all():
        if movie.imdb_rating and '/' in movie.imdb_rating:
            try:
                rating_value = movie.imdb_rating.split('/')[0]
                movie.imdb_rating_num = float(rating_value)
                movie.save()
                success_running_count += 1
            except ValueError:
                print(f"Failed to convert rating for: {movie.title}")
            total_count += 1

    end_time = time.time()  # Corrected to use time.time()
    run_time = end_time - start_time
    success_rate = success_running_count / total_count
    print(f"Success rate of converting imdb_ratings to imdb_rating_num: {success_running_count}/{total_count} = {success_rate}")
    print(f"Total time to run: {end_time} - {start_time} = {run_time}")

# End of your if block
